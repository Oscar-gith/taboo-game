<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>Taboo en LÃ­nea</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ============================================================
       SCREEN 1: HOME â€” Join or create a room
       ============================================================ -->
  <div id="screen-home" class="screen active">
    <header class="game-header">
      <button id="btn-help-home" class="btn-help" title="CÃ³mo jugar">?</button>
      <h1 class="logo">TABOO</h1>
      <p class="subtitle">en lÃ­nea Â· en espaÃ±ol</p>
    </header>

    <main class="card-panel">
      <div class="field-group">
        <label for="player-name">Tu nombre</label>
        <input id="player-name" type="text" placeholder="Ej: MarÃ­a" maxlength="20" autocomplete="off">
      </div>

      <div class="field-group">
        <label>Modo de juego</label>
        <div class="mode-selector">
          <label class="mode-option">
            <input type="radio" name="game-mode" value="classic" checked>
            <span class="mode-label">
              <span class="mode-icon">ğŸ‘¥</span>
              <span class="mode-name">ClÃ¡sico</span>
              <span class="mode-desc">4+ jugadores, 2 equipos</span>
            </span>
          </label>
          <label class="mode-option">
            <input type="radio" name="game-mode" value="practice">
            <span class="mode-label">
              <span class="mode-icon">ğŸ¯</span>
              <span class="mode-name">PrÃ¡ctica</span>
              <span class="mode-desc">1 jugador, sin timer</span>
            </span>
          </label>
        </div>
      </div>

      <button id="btn-create-room" class="btn btn-primary btn-large">
        Crear sala nueva
      </button>
      <p id="create-room-hint" class="hint" style="text-align:center; margin-top:0.5rem;">SerÃ¡s asignado al Equipo A</p>

      <div class="divider">â€” o â€”</div>

      <div class="field-group">
        <label for="room-code-input">CÃ³digo de sala</label>
        <input id="room-code-input" type="text" placeholder="Ej: XTBK92" maxlength="6"
               autocomplete="off" autocapitalize="characters" style="text-transform:uppercase">
      </div>

      <div class="field-group">
        <label>Elige tu equipo</label>
        <div class="team-selector">
          <label class="team-option">
            <input type="radio" name="team-choice" value="Equipo A" checked>
            <span class="team-label team-a">Equipo A</span>
          </label>
          <label class="team-option">
            <input type="radio" name="team-choice" value="Equipo B">
            <span class="team-label team-b">Equipo B</span>
          </label>
        </div>
      </div>

      <button id="btn-join-room" class="btn btn-secondary btn-large">
        Unirse a sala
      </button>
    </main>
  </div>

  <!-- ============================================================
       SCREEN 2: LOBBY â€” Waiting for players to join
       ============================================================ -->
  <div id="screen-lobby" class="screen">
    <header class="game-header">
      <button id="btn-help-lobby" class="btn-help" title="CÃ³mo jugar">?</button>
      <h2>Sala</h2>
      <div class="room-code-display">
        <span id="lobby-room-code">------</span>
        <button id="btn-copy-code" class="btn btn-ghost btn-small" title="Copiar cÃ³digo">ğŸ“‹</button>
      </div>
      <p class="hint">Comparte este cÃ³digo con los otros jugadores</p>
    </header>

    <main class="card-panel">
      <div id="team-list">
        <!-- Populated by game.js: renderLobby() -->
      </div>

      <div id="lobby-status" class="status-message">Esperando jugadores...</div>

      <button id="btn-start-game" class="btn btn-primary btn-large hidden">
        Â¡Iniciar juego!
      </button>
    </main>
  </div>

  <!-- ============================================================
       SCREEN 3: WAITING FOR DESCRIBER â€” Between turns
       ============================================================ -->
  <div id="screen-waiting-describer" class="screen">
    <header class="game-header">
      <span id="room-badge-waiting" class="room-code-badge">------</span>
      <div id="scores-waiting" class="scores-bar">
        <!-- Populated by renderScores() -->
      </div>
    </header>

    <main class="card-panel centered">
      <div class="turn-info">
        <p class="label">Turno del equipo</p>
        <h2 id="wfd-active-team" class="team-name-display">â€”</h2>
        <p id="wfd-describer-info" class="hint">
          <span id="wfd-describer-name">â€”</span> va a describir
        </p>
      </div>

      <button id="btn-describer-ready" class="btn btn-primary btn-large hidden">
        Â¡Estoy listo! â†’
      </button>

      <p id="wfd-wait-msg" class="hint hidden">
        Esperando a que <span id="wfd-describer-name-2">â€”</span> estÃ© listo...
      </p>
    </main>
  </div>

  <!-- ============================================================
       SCREEN 4: TURN ACTIVE (DESCRIBER VIEW)
       ============================================================ -->
  <div id="screen-turn-describer" class="screen">
    <header class="turn-header">
      <span id="room-badge-describer" class="room-code-badge">------</span>
      <div id="timer-describer" class="timer">60</div>
      <div id="scores-describer" class="scores-bar-compact">
        <!-- Populated by renderScores() -->
      </div>
      <div id="player-info-describer" class="player-info">
        <img id="avatar-describer" class="player-avatar" src="" alt="">
        <span id="player-name-describer">â€”</span>
        <span class="role-badge describer">Describiendo</span>
      </div>
    </header>

    <main class="card-panel">
      <div id="card-display" class="taboo-card">
        <h2 id="card-word" class="main-word">CARGANDO...</h2>
        <ul id="taboo-words-list" class="taboo-list">
          <!-- <li>palabra</li> x5 -->
        </ul>
      </div>

      <div class="action-buttons">
        <button id="btn-correct" class="btn btn-correct">
          âœ“ Correcto <span class="points-badge">+1</span>
        </button>
        <button id="btn-skip" class="btn btn-skip">
          â†’ Pasar <span class="points-badge neutral">0</span>
        </button>
      </div>
    </main>
  </div>

  <!-- ============================================================
       SCREEN 5: TURN ACTIVE (GUESSER / BUZZER VIEW)
       ============================================================ -->
  <div id="screen-turn-observer" class="screen">
    <header class="turn-header">
      <span id="room-badge-observer" class="room-code-badge">------</span>
      <div id="timer-observer" class="timer">60</div>
      <div id="scores-observer" class="scores-bar-compact">
        <!-- Populated by renderScores() -->
      </div>
      <div id="player-info-observer" class="player-info">
        <img id="avatar-observer" class="player-avatar" src="" alt="">
        <span id="player-name-observer">â€”</span>
        <span id="role-badge-observer" class="role-badge">â€”</span>
      </div>
    </header>

    <main class="card-panel centered">
      <div class="observer-area">
        <!-- Guesser view: can't see the card -->
        <div class="card-back">
          <p id="observer-guesser-msg" class="observer-label hidden">
            ğŸ—£ï¸ Adivina la palabra...
          </p>
          <p id="observer-buzzer-msg" class="observer-label hidden">
            ğŸ‘‚ Escucha las palabras tabÃº...
          </p>
        </div>

        <!-- Buzzer view: can see the card to catch taboo words -->
        <div id="buzzer-card-display" class="taboo-card buzzer-card hidden">
          <h2 id="buzzer-card-word" class="main-word">â€”</h2>
          <ul id="buzzer-taboo-words-list" class="taboo-list">
            <!-- Taboo words shown here -->
          </ul>
        </div>

        <!-- Only visible to opposing teams (buzzers) -->
        <button id="btn-buzz" class="btn btn-buzz hidden">
          Â¡TABÃš! <span class="points-badge negative">âˆ’1</span>
        </button>
      </div>

      <!-- Live feed of scored cards this turn -->
      <div id="turn-live-feed" class="live-feed">
        <!-- Cards scored/skipped this turn appear here as they happen -->
      </div>
    </main>
  </div>

  <!-- ============================================================
       SCREEN 6: TURN ENDED â€” Summary after timer runs out
       ============================================================ -->
  <div id="screen-turn-ended" class="screen">
    <header class="game-header">
      <span id="room-badge-ended" class="room-code-badge">------</span>
      <h2>Â¡Tiempo!</h2>
    </header>

    <main class="card-panel">
      <div id="turn-summary-scores" class="score-summary">
        <!-- Team scores after this turn -->
      </div>

      <div id="turn-next-info" class="next-turn-info">
        <p>Siguiente turno:</p>
        <p><strong id="next-team-name">â€”</strong></p>
        <p>Describe: <span id="next-describer-name">â€”</span></p>
      </div>

      <p class="hint countdown-hint">El juego continÃºa en un momento...</p>
    </main>
  </div>

  <!-- ============================================================
       SCREEN 7: GAME OVER â€” Final scores and winner
       ============================================================ -->
  <div id="screen-game-over" class="screen">
    <header class="game-header">
      <span id="room-badge-gameover" class="room-code-badge">------</span>
      <h1 id="winner-banner" class="winner-text">Â¡Juego terminado!</h1>
    </header>

    <main class="card-panel">
      <div id="final-podium" class="podium">
        <!-- Ranked team scores: 1st, 2nd, 3rd... -->
      </div>

      <details class="stats-accordion">
        <summary>EstadÃ­sticas individuales</summary>
        <div id="player-stats">
          <!-- Per-player: cards described + cards guessed -->
        </div>
      </details>

      <button id="btn-play-again" class="btn btn-primary btn-large hidden">
        Jugar de nuevo
      </button>
    </main>
  </div>

  <!-- ============================================================
       SCREEN 8: PRACTICE MODE â€” Solo practice session
       ============================================================ -->
  <div id="screen-practice" class="screen">
    <header class="turn-header practice-header">
      <span id="room-badge-practice" class="room-code-badge">------</span>
      <div id="practice-stats" class="practice-stats-bar">
        <span class="stat-item">Vistas: <strong id="practice-viewed">0</strong></span>
        <span class="stat-item correct">Correctas: <strong id="practice-correct">0</strong></span>
        <span class="stat-item skip">Pasadas: <strong id="practice-skipped">0</strong></span>
      </div>
    </header>

    <main class="card-panel">
      <p class="practice-label">Modo PrÃ¡ctica</p>
      <div id="practice-card-display" class="taboo-card">
        <h2 id="practice-card-word" class="main-word">CARGANDO...</h2>
        <ul id="practice-taboo-words-list" class="taboo-list">
          <!-- <li>palabra</li> x5 -->
        </ul>
      </div>

      <div class="action-buttons">
        <button id="btn-practice-correct" class="btn btn-correct">
          âœ“ Correcto
        </button>
        <button id="btn-practice-skip" class="btn btn-skip">
          â†’ Pasar
        </button>
      </div>

      <button id="btn-end-practice" class="btn btn-ghost btn-small" style="margin-top: 1.5rem;">
        Terminar prÃ¡ctica
      </button>
    </main>
  </div>

  <!-- ============================================================
       SCREEN 9: PRACTICE ENDED â€” Summary after practice
       ============================================================ -->
  <div id="screen-practice-ended" class="screen">
    <header class="game-header">
      <h1 class="practice-end-title">Â¡PrÃ¡ctica completada!</h1>
    </header>

    <main class="card-panel">
      <div class="practice-summary">
        <div class="practice-stat-row">
          <span class="stat-label">Cartas vistas</span>
          <span id="summary-viewed" class="stat-value">0</span>
        </div>
        <div class="practice-stat-row correct">
          <span class="stat-label">Marcadas correctas</span>
          <span id="summary-correct" class="stat-value">0</span>
        </div>
        <div class="practice-stat-row skip">
          <span class="stat-label">Pasadas</span>
          <span id="summary-skipped" class="stat-value">0</span>
        </div>
      </div>

      <div class="practice-actions">
        <button id="btn-restart-practice" class="btn btn-primary btn-large">
          Practicar de nuevo
        </button>
        <button id="btn-exit-practice" class="btn btn-secondary btn-large">
          Volver al inicio
        </button>
      </div>
    </main>
  </div>

  <!-- ============================================================
       TUTORIAL MODAL
       ============================================================ -->
  <div id="tutorial-modal" class="modal hidden">
    <div class="modal-overlay"></div>
    <div class="modal-content tutorial-content">
      <button id="btn-tutorial-close" class="btn-modal-close">âœ•</button>

      <div class="tutorial-slides">
        <!-- Slide 1 -->
        <div class="tutorial-slide active" data-slide="0">
          <div class="tutorial-icon">ğŸ¯</div>
          <h2>Â¡Bienvenido a Taboo!</h2>
          <p>El objetivo es que tu equipo adivine la palabra secreta que tÃº describes.</p>
          <p class="tutorial-detail">Pero cuidado... Â¡hay palabras que no puedes decir!</p>
        </div>

        <!-- Slide 2 -->
        <div class="tutorial-slide" data-slide="1">
          <div class="tutorial-icon">ğŸ‘¥</div>
          <h2>Los Roles</h2>
          <div class="tutorial-roles">
            <div class="tutorial-role">
              <span class="role-badge describer">Descriptor</span>
              <p>Da pistas sin decir las palabras Taboo</p>
            </div>
            <div class="tutorial-role">
              <span class="role-badge guesser">Adivinador</span>
              <p>Adivina la palabra con las pistas</p>
            </div>
            <div class="tutorial-role">
              <span class="role-badge buzzer">Vigilante</span>
              <p>Caza las palabras Taboo del otro equipo</p>
            </div>
          </div>
        </div>

        <!-- Slide 3 -->
        <div class="tutorial-slide" data-slide="2">
          <div class="tutorial-icon">ğŸš«</div>
          <h2>Palabras Taboo</h2>
          <p>El descriptor <strong>NO puede decir</strong>:</p>
          <ul class="tutorial-list">
            <li>La palabra principal</li>
            <li>Las 5 palabras Taboo de la carta</li>
            <li>Variaciones (plurales, conjugaciones)</li>
          </ul>
        </div>

        <!-- Slide 4 -->
        <div class="tutorial-slide" data-slide="3">
          <div class="tutorial-icon">ğŸ†</div>
          <h2>PuntuaciÃ³n</h2>
          <div class="tutorial-scoring">
            <div class="score-item correct">âœ“ Correcto <span>+1 punto</span></div>
            <div class="score-item wrong">Â¡Taboo! <span>âˆ’1 punto</span></div>
            <div class="score-item skip">â†’ Pasar <span>0 puntos</span></div>
          </div>
          <p class="tutorial-detail">El primer equipo en llegar a 15 puntos gana.</p>
        </div>

        <!-- Slide 5 -->
        <div class="tutorial-slide" data-slide="4">
          <div class="tutorial-icon">ğŸš€</div>
          <h2>Â¡A jugar!</h2>
          <p>Crea una sala nueva o Ãºnete con un cÃ³digo de 6 letras.</p>
          <p class="tutorial-detail">Necesitas al menos 2 jugadores por equipo para comenzar.</p>
        </div>
      </div>

      <div class="tutorial-nav">
        <button id="btn-tutorial-prev" class="btn btn-ghost">â† Anterior</button>
        <div class="tutorial-dots">
          <span class="dot active" data-slide="0"></span>
          <span class="dot" data-slide="1"></span>
          <span class="dot" data-slide="2"></span>
          <span class="dot" data-slide="3"></span>
          <span class="dot" data-slide="4"></span>
        </div>
        <button id="btn-tutorial-next" class="btn btn-primary">Siguiente â†’</button>
      </div>
    </div>
  </div>

  <!-- ============================================================
       TOAST NOTIFICATIONS (overlaid on all screens)
       ============================================================ -->
  <div id="toast-container" aria-live="polite">
    <!-- Toasts injected here by showToast() in game.js -->
  </div>

  <!-- Socket.io client library â€” served automatically by Socket.io server -->
  <script src="/socket.io/socket.io.js"></script>
  <!-- All game logic -->
  <script src="game.js"></script>
</body>
</html>
